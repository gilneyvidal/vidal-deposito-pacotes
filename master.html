<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Master - Vidal Dep√≥sito</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>‚öôÔ∏è Master</h2>
                <p>Acesso administrativo</p>
            </div>
            
            <ul class="nav-menu">
                <li>
                    <a href="#" class="active" onclick="showSection('dashboard'); return false;">
                        üìä Dashboard
                    </a>
                </li>
                <li>
                    <a href="#" onclick="showSection('origens'); return false;">
                        üè¢ Origens
                    </a>
                </li>
                <li>
                    <a href="#" onclick="showSection('usuarios'); return false;">
                        üë• Usu√°rios
                    </a>
                </li>
                <li>
                    <a href="#" onclick="showSection('corredores'); return false;">
                        üì¶ Corredores
                    </a>
                </li>
                <li>
                    <a href="#" onclick="showSection('financeiro'); return false;">
                        üí∞ Financeiro
                    </a>
                </li>
                <li>
                    <a href="#" onclick="showSection('relatorios'); return false;">
                        üìà Relat√≥rios
                    </a>
                </li>
            </ul>
            
            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar" style="background: var(--warning);">üëë</div>
                    <div class="user-details">
                        <div class="user-name" id="userEmailMaster">Master</div>
                        <div class="user-role">Administrador</div>
                    </div>
                </div>
                <button onclick="logout()" class="btn-secondary btn-block">
                    Sair do Sistema
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- DASHBOARD -->
            <section id="dashboard" class="section">
                <div class="page-header">
                    <h1>Dashboard</h1>
                    <p id="dataAtual" style="color: var(--gray-500);"></p>
                </div>
                
                <div class="cards-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3>Pacotes no Dep√≥sito</h3>
                            <div class="card-icon blue">üì¶</div>
                        </div>
                        <div class="value" id="totalPacotes">0</div>
                        <div class="card-footer">Total atual</div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3>Ocupa√ß√£o</h3>
                            <div class="card-icon yellow">üìä</div>
                        </div>
                        <div class="value" id="ocupacao">0%</div>
                        <div class="card-footer">Capacidade utilizada</div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3>Entradas Hoje</h3>
                            <div class="card-icon green">üì•</div>
                        </div>
                        <div class="value" id="entradasHoje">0</div>
                        <div class="card-footer">Desde 00:00</div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3>Sa√≠das Hoje</h3>
                            <div class="card-icon red">üì§</div>
                        </div>
                        <div class="value" id="saidasHoje">0</div>
                        <div class="card-footer">Retiradas hoje</div>
                    </div>
                </div>
            </section>

            <!-- ORIGENS -->
            <section id="origens" class="section" style="display: none;">
                <div class="page-header">
                    <h1>Gerenciar Origens</h1>
                    <p>Cadastre empresas e valores por pacote</p>
                </div>
                
                <div class="card" style="margin-bottom: 24px;">
                    <h3 style="margin-bottom: 20px;">‚ûï Adicionar Nova Origem</h3>
                    <div style="display: grid; grid-template-columns: 2fr 1fr 1fr auto; gap: 16px; align-items: end;">
                        <div class="form-group" style="margin: 0;">
                            <label>Nome da Empresa</label>
                            <input type="text" id="nomeOrigem" placeholder="Ex: Mercado Livre">
                        </div>
                        <div class="form-group" style="margin: 0;">
                            <label>Valor R$</label>
                            <input type="number" id="valorOrigem" placeholder="0.00" step="0.01" min="0">
                        </div>
                        <div class="form-group" style="margin: 0;">
                            <label>Tipo</label>
                            <select id="tipoOrigem">
                                <option value="marketplace">Marketplace</option>
                                <option value="transportadora">Transportadora</option>
                                <option value="loja">Loja F√≠sica</option>
                            </select>
                        </div>
                        <button onclick="adicionarOrigem()" class="btn-primary">
                            Adicionar
                        </button>
                    </div>
                </div>
                
                <div class="table-container" id="listaOrigens">
                    <table>
                        <thead>
                            <tr>
                                <th>Origem</th>
                                <th>Tipo</th>
                                <th>Valor/Pacote</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td colspan="4" style="text-align: center; padding: 40px; color: var(--gray-500);">
                                    Carregando origens...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- USU√ÅRIOS -->
            <section id="usuarios" class="section" style="display: none;">
                <div class="page-header">
                    <h1>Gerenciar Usu√°rios</h1>
                    <p>Crie acessos para operadores</p>
                </div>
                
                <div class="card" style="margin-bottom: 24px;">
                    <h3 style="margin-bottom: 20px;">‚ûï Criar Novo Usu√°rio</h3>
                    <div style="display: grid; grid-template-columns: 2fr 1fr 1fr auto; gap: 16px; align-items: end;">
                        <div class="form-group" style="margin: 0;">
                            <label>E-mail</label>
                            <input type="email" id="emailUsuario" placeholder="operador@empresa.com">
                        </div>
                        <div class="form-group" style="margin: 0;">
                            <label>Senha</label>
                            <input type="password" id="senhaUsuario" placeholder="M√≠nimo 6 caracteres">
                        </div>
                        <div class="form-group" style="margin: 0;">
                            <label>Tipo</label>
                            <select id="tipoUsuario">
                                <option value="operacional">Operacional</option>
                                <option value="master">Master</option>
                            </select>
                        </div>
                        <button onclick="criarUsuario()" class="btn-primary">
                            Criar
                        </button>
                    </div>
                </div>
                
                <div class="table-container" id="listaUsuarios">
                    <table>
                        <thead>
                            <tr>
                                <th>E-mail</th>
                                <th>Tipo</th>
                                <th>Criado em</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </section>

            <!-- CORREDORES -->
            <section id="corredores" class="section" style="display: none;">
                <div class="page-header">
                    <h1>Gerenciar Corredores</h1>
                    <p>Estrutura f√≠sica do dep√≥sito</p>
                </div>
                
                <div class="card" style="margin-bottom: 24px;">
                    <h3 style="margin-bottom: 12px;">‚ûï Adicionar Corredor</h3>
                    <p style="color: var(--gray-500); margin-bottom: 20px; font-size: 14px;">
                        Cada corredor tem: 2 prateleiras √ó 4 andares √ó 5 espa√ßos √ó 4 subespa√ßos = <strong>160 posi√ß√µes</strong>
                    </p>
                    <div style="display: flex; gap: 16px; align-items: end; max-width: 400px;">
                        <div class="form-group" style="margin: 0; flex: 1;">
                            <label>Letra do Corredor (A-Z)</label>
                            <input 
                                type="text" 
                                id="letraCorredor" 
                                placeholder="Ex: B" 
                                maxlength="1"
                                style="text-transform: uppercase;"
                            >
                        </div>
                        <button onclick="adicionarCorredor()" class="btn-primary">
                            Criar Corredor
                        </button>
                    </div>
                </div>
                
                <div id="listaCorredores">
                    <div class="cards-grid">
                        <div class="card">
                            <p style="text-align: center; color: var(--gray-500);">Carregando corredores...</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- FINANCEIRO -->
            <section id="financeiro" class="section" style="display: none;">
                <div class="page-header">
                    <h1>Movimento Financeiro</h1>
                    <p>Acompanhamento de receitas</p>
                </div>
                
                <div class="cards-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3>Saldo do M√™s</h3>
                            <div class="card-icon green">üí∞</div>
                        </div>
                        <div class="value" id="saldoMes" style="color: var(--success);">R$ 0,00</div>
                        <div class="card-footer">M√™s atual</div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3>Proje√ß√£o Semanal</h3>
                            <div class="card-icon blue">üìà</div>
                        </div>
                        <div class="value" id="projecaoSemana">R$ 0,00</div>
                        <div class="card-footer">√öltimos 7 dias</div>
                    </div>
                </div>
                
                <div class="table-container" style="margin-top: 24px;" id="movimentosFinanceiros">
                    <table>
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Origem</th>
                                <th>Valor</th>
                                <th>Tipo</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td colspan="4" style="text-align: center; padding: 40px; color: var(--gray-500);">
                                    Carregando movimentos...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- RELAT√ìRIOS -->
            <section id="relatorios" class="section" style="display: none;">
                <div class="page-header">
                    <h1>Relat√≥rios Semanais</h1>
                    <p>Gera√ß√£o de relat√≥rios para cobran√ßa</p>
                </div>
                
                <div class="card" style="margin-bottom: 24px;">
                    <h3 style="margin-bottom: 20px;">üìÖ Selecionar Per√≠odo</h3>
                    <div style="display: flex; gap: 16px; align-items: end; max-width: 500px;">
                        <div class="form-group" style="margin: 0; flex: 1;">
                            <label>Semana</label>
                            <input type="week" id="semanaRelatorio">
                        </div>
                        <button onclick="gerarRelatorioSemanal()" class="btn-primary">
                            üìä Gerar Relat√≥rio
                        </button>
                    </div>
                </div>
                
                <div id="previewRelatorio"></div>
            </section>
        </main>
    </div>

    <!-- Scripts -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    
    <script src="js/firebase-config.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/master.js"></script>
    
    <script>
        auth.onAuthStateChanged(user => {
            if (user) {
                document.getElementById('userEmailMaster').textContent = user.email;
            }
        });
    </script>
</body>
</html>
